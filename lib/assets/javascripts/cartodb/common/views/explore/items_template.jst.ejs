<li class="FeedItem">
  <a href="http://<%- vis.username %>.<%- account_host %>" class="FeedItem-avatar">
    <img src="<%- vis.avatar_url %>" class="UserAvatar-img UserAvatar-img--big" />
  </a>

  <% if (vis.type == 'derived') { %>
  <div class="MapCard MapCard--borderless MapCard--explore js-card" data-vis-id="<%- vis.id %>">
    <a href="http://<%- vis.username %>.<%- account_host %>/viz/<%- vis.id %>/public_map" class="MapCard-header js-header">
    <div class="MapCard-loader js-loader"></div>
    </a>

    <div class="MapCard-content">
      <div class="MapCard-contentBody">
        <div class="MapCard-contentBodyRow MapCard-contentBodyRow--flex">
          <h3 class="MapCard-title DefaultTitle">
            <a href="http://<%- vis.username %>.<%- account_host %>/viz/<%- vis.id %>/public_map" class="DefaultTitle-link u-ellipsLongText" title="<%- vis.name %>"><%- vis.name %></a>
          </h3>
        </div>
      </div>

      <div class="MapCard-contentFooter MapCard-contentFooter--lefty">
        <a href="#/like" class="LikesIndicator js-like is-likeable" data-vis-id="<%- vis.id %>" data-show-count="true" data-show-label="true">
          <i class="iconFont iconFont-Heart--fill LikesIndicator-icon"></i>
          <span class="LikesIndicator-count"><%- vis.likes %></span>
        </a>
        <div class="MapCard-contentFooterIcon">
          <i class="iconFont iconFont-Eye"></i>
          <span class="MapCardIcon-counter"><%- cdb.Utils.formatNumber(vis.mapviews) %></span> <span class="MapCardIcon-label">view<%- vis.mapviews !== 1 ? 's' : '' %></span>
        </div>
        <div class="MapCard-contentFooterIcon MapCard-contentFooterIcon--datasets">
          <i class="iconFont iconFont-Airlock"></i>
          <span clas="MapCardIcon-counter"><%- cdb.Utils.formatNumber(vis.table_names.length) %></span> <span class="MapCardIcon-label">public dataset<%- vis.table_names.length !== 1 ? 's' : '' %></span>
        </div>
        <div class="MapCard-contentFooterIcon">
          <i class="iconFont iconFont-Clock DefaultTimeDiff-icon"></i>
          <span class="MapCardIcon-counter"><%- moment(vis.updated_at).fromNow() %></span>
        </div>
      </div>
    </div>
  </div>
  <% } else { %>
  <div class="DatasetCard DatasetCard--explore">
    <div class="DatasetCard-content">
      <div class="DatasetCard-contentBodyRow DatasetCard-contentBodyRow--flex">
        <div class="DatasetCard-contentBodyDetails--left">
          <div class="DatasetsList-itemCategory is--<%- geomType %>Dataset"></div>
        </div>
        <div class="DatasetCard-contentBodyDetails--right">

          <h3 class="DatasetCard-title DefaultTitle">
            <a href="http://<%- vis.username %>.<%- account_host %>/tables/<%- vis.name %>/public" class="DefaultTitle-link u-ellipsLongText" title="<%- vis.name %>"><%- vis.name %></a>
          </h3>

          <div class="DatasetCard-contentFooter">
            <a href="#/like" class="LikesIndicator js-like is-likeable" data-vis-id="<%- vis.id %>" data-show-count="true" data-show-label="true">
              <i class="iconFont iconFont-Heart--fill LikesIndicator-icon"></i>
              <span class="LikesIndicator-count"><%- vis.likes %></span>
            </a>
          </a>

          <div class="MapCard-contentFooterIcon">
            <i class="iconFont iconFont-Eye"></i>
            <%- cdb.Utils.formatNumber(vis.mapviews) %> view<%- vis.mapviews !== 1 ? 's' : '' %>
          </div>

          <% if (vis.tags && vis.tags.length > 0) { %>
          <div class="MapCard-contentFooterIcon">
            <i class="iconFont iconFont-Label"></i>
            <%- vis.tags && vis.tags[0] %>
          </div>
          <% } %>

          <div class="MapCard-contentFooterIcon">
            <i class="iconFont iconFont-Floppy"></i>
            <span class="MapCardIcon-counter"><%- cdb.Utils.formatNumber(vis.table_size) %></span> <span class="MapCardIcon-label">Mb</span>
          </div>

          <div class="MapCard-contentFooterIcon">
            <i class="iconFont iconFont-Rows"></i>
            <span class="MapCardIcon-counter"><%- cdb.Utils.formatNumber(vis.rows) %></span> <span class="MapCardIcon-label">row<%- vis.rows !== 1 ? 's' : '' %></span>
          </div>

          <div class="MapCard-contentFooterIcon">
            <i class="iconFont iconFont-Clock DefaultTimeDiff-icon"></i>
            <%- moment(vis.updated_at).fromNow() %>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
<% } %>
</li>
