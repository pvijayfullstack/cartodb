<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; CartoDB Platform Documentation 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="CartoDB Platform Documentation 1.0.0 documentation" href="index.html" />
    <link rel="prev" title="Components" href="components.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="components.html" title="Components"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">CartoDB Platform Documentation 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="intro">
<h2>intro<a class="headerlink" href="#intro" title="Permalink to this headline">¶</a></h2>
<p>CartoDB is under heavy development. This means that this README
can fail at some point. If see any issues, please let us know and we will fix them as soon as we can. Also if you feel that something is wrong or even missing we will be happy to fix it.</p>
<p>For any doubt about the process you can ask in our [Google
Group](<a class="reference external" href="https://groups.google.com/forum/#!forum/cartodb">https://groups.google.com/forum/#!forum/cartodb</a>).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This README is intended for <strong>Ubuntu 12.04</strong>. This doesn&#8217;t mean that it can&#8217;t be installed on other Linux versions or OSX systems, but that it&#8217;s guaranteed to work only in Ubuntu 12.04.
If anyone wants to share with us the installation process for any other system we will be more than happy to point it from this README.  That said, there are also many successful installations on Amazon EC2, Linode, dedicated instances and development machines running OS X and Ubuntu 12.04+.</p>
</div>
</div>
<div class="section" id="system-configuration">
<h2>system configuration<a class="headerlink" href="#system-configuration" title="Permalink to this headline">¶</a></h2>
<p>Installations assume you use UTF8, you can set it like this:
.. highlight:: bash</p>
<dl class="docutils">
<dt>::</dt>
<dd>echo -e &#8216;LANG=en_US.UTF-8nLC_ALL=en_US.UTF-8&#8217; | sudo tee /etc/default/locale
source /etc/default/locale</dd>
</dl>
</div>
<div class="section" id="system-dependencies">
<h2>system dependencies<a class="headerlink" href="#system-dependencies" title="Permalink to this headline">¶</a></h2>
<p>These are the third party modules we use:</p>
<blockquote>
<div><ul class="simple">
<li>Ubuntu 12.04</li>
<li>Postgres 9.3.x (with plpythonu extension)</li>
<li>[cartodb-postgresql](<a class="reference external" href="https://github.com/CartoDB/cartodb-postgresql">https://github.com/CartoDB/cartodb-postgresql</a>) extension</li>
<li>Redis 2.8+</li>
<li>Ruby 1.9.3</li>
<li>Node.js 0.10.x</li>
<li>CartoDB-SQL-API</li>
<li>GEOS 3.3.4</li>
<li>GDAL 1.10.x (Starting with CartoDB 2.2.0)</li>
<li>PostGIS 2.1.x</li>
<li>Mapnik 2.1.1</li>
<li>Windshaft-cartodb</li>
<li>ImageMagick 6.6.9+ (for the testsuite)</li>
</ul>
</div></blockquote>
<p>In order to install it using apt-get you need to install cartodb [PPA](<a class="reference external" href="https://help.ubuntu.com/community/PPA)s">https://help.ubuntu.com/community/PPA)s</a></p>
<div class="highlight-bash"><div class="highlight"><pre>sudo apt-get update
sudo apt-get install python-software-properties
sudo add-apt-repository ppa:cartodb/base
sudo add-apt-repository ppa:cartodb/gis
sudo add-apt-repository ppa:cartodb/mapnik
sudo add-apt-repository ppa:cartodb/nodejs
sudo add-apt-repository ppa:cartodb/redis
sudo add-apt-repository ppa:cartodb/postgresql-9.3
sudo add-apt-repository ppa:cartodb/nodejs-010
sudo apt-get update
sudo apt-get install build-essential checkinstall
sudo apt-get install unp
sudo apt-get install zip
sudo apt-get install libgeos-c1 libgeos-dev
sudo apt-get install gdal-bin libgdal1-dev
sudo apt-get install libjson0 python-simplejson libjson0-dev
sudo apt-get install proj-bin proj-data libproj-dev
sudo apt-get install postgresql-9.3 postgresql-client-9.3 postgresql-contrib-9.3 postgresql-server-dev-9.3
sudo apt-get install postgresql-plpython-9.3
sudo apt-get install redis-server
sudo apt-get install python2.7-dev
sudo apt-get install build-essential
sudo apt-get install python-setuptools
sudo apt-get install libmapnik-dev python-mapnik mapnik-utils
sudo apt-get install nodejs
sudo apt-get install imagemagick
</pre></div>
</div>
<p>After install everything postgres need to be configured since there is an error with credential-based connections for development, and all connections must be performed using method &#8220;trust&#8221; inside config file <cite>pg_hba.conf</cite>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /etc/postgresql/9.3/main
sudo vim pg_hba.conf
</pre></div>
</div>
<p>And change inside all local connections from <tt class="docutils literal"><span class="pre">peer/md5/...</span></tt> to <tt class="docutils literal"><span class="pre">trust</span></tt>.</p>
<p>Then restart postgres and you&#8217;re done.</p>
<div class="highlight-bash"><div class="highlight"><pre>sudo /etc/init.d/postgresql restart
</pre></div>
</div>
</div>
<div class="section" id="install-postgis">
<h2>Install PostGIS<a class="headerlink" href="#install-postgis" title="Permalink to this headline">¶</a></h2>
<p>[PostGIS](<a class="reference external" href="http://postgis.net">http://postgis.net</a>) is
the geospatial extension that allows PostgreSQL to support geospatial
queries. This is the heart of CartoDB!</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /usr/local/src
sudo wget http://download.osgeo.org/postgis/source/postgis-2.1.7.tar.gz
sudo tar -xvzf postgis-2.1.7.tar.gz
<span class="nb">cd </span>postgis-2.1.7
sudo ./configure --with-raster --with-topology
sudo make
sudo make install
</pre></div>
</div>
<p>Finally, CartoDB depends on a geospatial database template named
<cite>template_postgis</cite>.</p>
<div class="highlight-bash"><div class="highlight"><pre>sudo su - postgres
<span class="nv">POSTGIS_SQL_PATH</span><span class="o">=</span><span class="sb">`</span>pg_config --sharedir<span class="sb">`</span>/contrib/postgis-2.1
createdb -E UTF8 template_postgis
createlang -d template_postgis plpgsql
psql -d postgres -c <span class="s2">&quot;UPDATE pg_database SET datistemplate=&#39;true&#39; WHERE datname=&#39;template_postgis&#39;&quot;</span>
psql -d template_postgis -c <span class="s2">&quot;CREATE EXTENSION postgis&quot;</span>
psql -d template_postgis -c <span class="s2">&quot;CREATE EXTENSION postgis_topology&quot;</span>
psql -d template_postgis -c <span class="s2">&quot;GRANT ALL ON geometry_columns TO PUBLIC;&quot;</span>
psql -d template_postgis -c <span class="s2">&quot;GRANT ALL ON spatial_ref_sys TO PUBLIC;&quot;</span>
<span class="nb">exit</span>
</pre></div>
</div>
</div>
<div class="section" id="install-python-dependencies">
<h2>Install Python dependencies<a class="headerlink" href="#install-python-dependencies" title="Permalink to this headline">¶</a></h2>
<p>This needs to be done from the cartodb local copy.
To install the Python modules that CartoDB depends on.</p>
<div class="highlight-bash"><div class="highlight"><pre>easy_install pip
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span>/usr/include/gdal
<span class="nb">export </span><span class="nv">C_INCLUDE_PATH</span><span class="o">=</span>/usr/include/gdal
pip install --no-use-wheel -r python_requirements.txt
<span class="nb">exit</span>
</pre></div>
</div>
<p>If the previous step fails, try this alternative:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span>/usr/include/gdal
<span class="nb">export </span><span class="nv">C_INCLUDE_PATH</span><span class="o">=</span>/usr/include/gdal
sudo pip install --no-install GDAL
<span class="nb">cd</span> /tmp/pip_build_root/GDAL
sudo python setup.py build_ext --include-dirs<span class="o">=</span>/usr/include/gdal
sudo pip install --no-download GDAL
</pre></div>
</div>
</div>
<div class="section" id="install-ruby">
<h2>Install Ruby<a class="headerlink" href="#install-ruby" title="Permalink to this headline">¶</a></h2>
<p>We implemented CartoDB in the [Ruby](<a class="reference external" href="http://ruby-lang.org">http://ruby-lang.org</a>) programming language, you&#8217;ll need to install Ruby <strong>1.9.3</strong>. You can use rbenv or a system install, up to you.</p>
<p>For rbenv the official guide on <a class="reference external" href="https://github.com/sstephenson/rbenv#installation">https://github.com/sstephenson/rbenv#installation</a></p>
<p>For bundler simply run:</p>
<div class="highlight-bash"><div class="highlight"><pre>gem install bundler
</pre></div>
</div>
</div>
<div class="section" id="cartodb-postgresql">
<h2>cartodb-postgresql<a class="headerlink" href="#cartodb-postgresql" title="Permalink to this headline">¶</a></h2>
<p>This is the postgres extension needed to run cartodb</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /tmp
git clone https://github.com/CartoDB/pg_schema_triggers.git
<span class="nb">cd </span>pg_schema_triggers
sudo make all install <span class="nv">PGUSER</span><span class="o">=</span>postgres
sudo make installcheck <span class="nv">PGUSER</span><span class="o">=</span>postgres <span class="c"># to run tests</span>
<span class="nb">cd</span> ..
git clone https://github.com/CartoDB/cartodb-postgresql.git
<span class="nb">cd </span>cartodb-postgresql
git checkout cdb
sudo make all install
sudo <span class="nv">PGUSER</span><span class="o">=</span>postgres make installcheck <span class="c"># to run tests</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>if test_ddl_triggers fails it&#8217;s likely due to an incomplete installation of schema_triggers.
You need to add schema_triggers.so to the shared_preload_libraries setting in postgresql.conf :</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo vim /etc/postgresql/9.3/main/postgresql.conf
 <span class="nv">shared_preload_libraries</span> <span class="o">=</span> <span class="s1">&#39;schema_triggers.so&#39;</span>
<span class="nv">$ </span>sudo service postgresql restart <span class="c"># restart postgres</span>
</pre></div>
</div>
</div>
<p>After this change the 2nd installcheck of cartodb-postresql should be OK.</p>
<p>Check <a class="reference external" href="https://github.com/cartodb/cartodb-postgresql/">https://github.com/cartodb/cartodb-postgresql/</a> for further reference</p>
</div>
<div class="section" id="install-cartodb-sql-api">
<h2>Install CartoDB SQL API<a class="headerlink" href="#install-cartodb-sql-api" title="Permalink to this headline">¶</a></h2>
<p>The [CartoDB SQL API](<a class="reference external" href="https://github.com/CartoDB/CartoDB-SQL-API">https://github.com/CartoDB/CartoDB-SQL-API</a>)
component powers the SQL queries over HTTP. To install it:</p>
<div class="highlight-bash"><div class="highlight"><pre>git clone git://github.com/CartoDB/CartoDB-SQL-API.git
<span class="nb">cd </span>CartoDB-SQL-API
git checkout master
npm install
cp config/environments/development.js.example config/environments/development.js
</pre></div>
</div>
<p>To run CartoDB SQL API in development mode, simply type:</p>
<p><tt class="docutils literal"><span class="pre">`bash</span>
<span class="pre">node</span> <span class="pre">app.js</span> <span class="pre">development</span>
<span class="pre">`</span></tt></p>
</div>
<div class="section" id="install-windshaft-cartodb">
<h2>Install Windshaft-cartodb<a class="headerlink" href="#install-windshaft-cartodb" title="Permalink to this headline">¶</a></h2>
<p>The [Windshaft-cartodb](<a class="reference external" href="https://github.com/CartoDB/Windshaft-cartodb">https://github.com/CartoDB/Windshaft-cartodb</a>)
component powers the CartoDB Maps API. To install it:</p>
<dl class="docutils">
<dt>::</dt>
<dd>git clone git://github.com/CartoDB/Windshaft-cartodb.git
cd Windshaft-cartodb
git checkout master
npm install
cp config/environments/development.js.example config/environments/development.js</dd>
</dl>
<p>To run Windshaft-cartodb in development mode, simply type:</p>
<p><tt class="docutils literal"><span class="pre">`bash</span>
<span class="pre">node</span> <span class="pre">app.js</span> <span class="pre">development</span>
<span class="pre">`</span></tt></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#intro">intro</a></li>
<li><a class="reference internal" href="#system-configuration">system configuration</a></li>
<li><a class="reference internal" href="#system-dependencies">system dependencies</a></li>
<li><a class="reference internal" href="#install-postgis">Install PostGIS</a></li>
<li><a class="reference internal" href="#install-python-dependencies">Install Python dependencies</a></li>
<li><a class="reference internal" href="#install-ruby">Install Ruby</a></li>
<li><a class="reference internal" href="#cartodb-postgresql">cartodb-postgresql</a></li>
<li><a class="reference internal" href="#install-cartodb-sql-api">Install CartoDB SQL API</a></li>
<li><a class="reference internal" href="#install-windshaft-cartodb">Install Windshaft-cartodb</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="components.html"
                        title="previous chapter">Components</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="components.html" title="Components"
             >previous</a> |</li>
        <li><a href="index.html">CartoDB Platform Documentation 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Javi Santana.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>