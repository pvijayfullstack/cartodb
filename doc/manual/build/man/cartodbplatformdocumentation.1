.\" Man page generated from reStructuredText.
.
.TH "CARTODBPLATFORMDOCUMENTATION" "1" "June 24, 2015" "1.0.0" "CartoDB Platform Documentation"
.SH NAME
cartodbplatformdocumentation \- CartoDB Platform Documentation
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.sp
Contents:
.SH CARTODB ARCHITECTURE INTRODUCTION
.sp
CartoDB is an open source mapping platform composed by several projects. Each project contains one or more components that working together make the mapping platform work.
.SH COMPONENTS
.SS versions
.SS nginx
.INDENT 0.0
.TP
.B Routes all the requests depending on the url to the different services. In general
.INDENT 7.0
.IP \(bu 2
requests like /api/v1/maps are redirected to \fImaps_api\fP
.IP \(bu 2
requests like /api/v1/sql are redirected to \fIsql_api\fP
.IP \(bu 2
everything else is redirected to \fIeditor\fP
.UNINDENT
.UNINDENT
.sp
Some of those are redirected passing through \fIvarnish\fP
.SS varnish
.sp
CartoDB uses a custom version of varnish that fixes some race conditions present in varnish 2. See the repo \fI\%Varnish\fP
.SS redis
.sp
A redis instance
TODO: link to the config
.SS editor
.sp
CartoDB editor is a rails application and it\(aqs the component that drivers some of the most important things in cartodb like user management. This is the \fI\%repo\fP
.sp
Batch component is not a component itself, all the code is in editor repository but it\(aqs executed running a different command
.sp
TODO: config/running
.SS SQL API
.SS Maps API
.sp
components required:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
mapnik
.UNINDENT
.UNINDENT
.UNINDENT
.SS Postgres
.sp
Database component is basically a Postgres 9.3 instance running. CartoDB needs administration permissions since the editor needs to create new databases and users.
.sp
components required:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
pgbouncer
.IP \(bu 2
cartodb\-postgres
.IP \(bu 2
cartodb postgis branch
.UNINDENT
.UNINDENT
.UNINDENT
.sp
TODO: link to the configuration
.SH DEPLOY
.sp
There are two deployment options for CartoDB:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%single instance\fP where everything runs in the same machine.
.IP \(bu 2
\fI\%distributed\fP, every component runs in its on machine
.UNINDENT
.UNINDENT
.UNINDENT
[image]
.SS single instance
.sp
Single machine instance installation it\(aqs useful for simple installations where scalability is not the key.
.sp
In this case all the components run as processes:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
1 postgres + pgbouncer
.IP \(bu 2
1 nginx
.IP \(bu 2
1 varnish
.IP \(bu 2
N editor
.IP \(bu 2
1 batch machines (same editor code)
.IP \(bu 2
1 SQL API
.IP \(bu 2
1 Maps PI
.UNINDENT
.UNINDENT
.UNINDENT
.SS distributed
.sp
Distributed installation is meant for enviorments where scalability and performanc are important, the setup is more complex since each component requires 1 or more machines
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
1 postgres + pgbouncer
.IP \(bu 2
1 nginx
.IP \(bu 2
1 varnish
.IP \(bu 2
N editor
.IP \(bu 2
1 batch machines (same editor code)
.IP \(bu 2
1 SQL API
.IP \(bu 2
1 Maps PI
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.IP \(bu 2
\fIgenindex\fP
.IP \(bu 2
\fImodindex\fP
.IP \(bu 2
\fIsearch\fP
.UNINDENT
.SH AUTHOR
Javi Santana
.SH COPYRIGHT
2015, Javi Santana
.\" Generated by docutils manpage writer.
.
